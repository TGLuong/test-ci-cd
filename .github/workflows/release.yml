name: hello_workfow
on: [push]
jobs:
  build:
    name: build
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: cargo build --release
      - uses: hkusu/s3-upload-action@v2
        id: upload
        name: upload to s3
        with:
          aws-access-key-id: ${{ secrets.AWS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY}}
          aws-region: 'ap-northeast-1'
          aws-bucket: ${{ secrets.AWS_BUCKET }}
          file-path: 'target/release/cicd'
          bucket-root: 'test-cicd'
          destination-dir: "v0.1.0"
          output-file-url: true
          public: true
      - run: echo '${{ steps.upload.outputs.file-url }}'
